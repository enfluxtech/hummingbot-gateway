"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.formatResult = void 0;
const utils_1 = require("ethers/lib/utils");
const colors_1 = require("../colors");
const param_1 = require("./param");
function formatResult(result, fragment, { decimals, isInput, shorten }, dependencies) {
    var _a;
    decimals = decimals !== null && decimals !== void 0 ? decimals : -1;
    isInput = isInput !== null && isInput !== void 0 ? isInput : true;
    shorten = shorten !== null && shorten !== void 0 ? shorten : false;
    const stringifiedArgs = [];
    const params = isInput
        ? fragment.inputs
        : fragment === null || fragment === void 0 ? void 0 : fragment.outputs;
    if (!params) {
        return "";
    }
    for (let i = 0; i < params.length; i++) {
        const param = params[i];
        const name = (_a = param.name) !== null && _a !== void 0 ? _a : `arg_${i}`;
        stringifiedArgs.push([
            name,
            decimals !== -1 && i === 2 // display formatted value for erc20 transfer events
                ? (0, utils_1.formatUnits)(result[2], decimals)
                : (0, param_1.formatParam)(result[i], dependencies),
        ]);
    }
    return `${stringifiedArgs
        .map((entry) => `${stringifiedArgs.length > 1 || !shorten ? (0, colors_1.colorKey)(`${entry[0]}=`) : ""}${entry[1]}`)
        .join(", ")}`;
}
exports.formatResult = formatResult;
//# sourceMappingURL=result.js.map