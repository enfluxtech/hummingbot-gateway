"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.printDebugTrace = void 0;
const struct_log_1 = require("./struct-log");
const top_level_tx_1 = require("./top-level-tx");
/**
 * Makes a debug_traceTransaction query and uses structLog formatter
 * @param txHash Transaction hash
 * @param dependencies Tracer dependencies
 */
async function printDebugTrace(txHash, dependencies) {
    const trace = await dependencies.provider.send("debug_traceTransaction", [
        txHash,
        { disableStorage: true },
    ]);
    const addressStack = [];
    await (0, top_level_tx_1.printTopLevelTx)(txHash, addressStack, dependencies);
    for (const [i, structLog] of trace.structLogs.entries()) {
        await (0, struct_log_1.printStructLog)(structLog, i, trace.structLogs, addressStack, dependencies);
    }
}
exports.printDebugTrace = printDebugTrace;
//# sourceMappingURL=debug-trace.js.map