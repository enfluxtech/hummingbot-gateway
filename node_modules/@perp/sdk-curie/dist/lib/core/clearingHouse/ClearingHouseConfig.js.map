{"version":3,"file":"ClearingHouseConfig.js","sources":["../../../../src/core/clearingHouse/ClearingHouseConfig.ts"],"sourcesContent":["import Big from \"big.js\"\n\nimport { RATIO_DECIMAL } from \"../../constants\"\nimport { scaleDownDecimals } from \"../../utils\"\nimport {\n    ContractReader,\n    MarketExchangeFeeRatios,\n    MarketInsuranceFundFeeRatios,\n    MarketTickSpacings,\n} from \"../contractReader\"\n\nexport class ClearingHouseConfig {\n    private constructor(\n        private readonly _mmRatio: Big,\n        private readonly _imRatio: Big,\n        private readonly _maxFundingRateAbs: Big,\n        private readonly _twapInterval: Big,\n        private readonly _marketExchangeFeeRatios: MarketExchangeFeeRatios,\n        private readonly _marketInsuranceFundFeeRatios: MarketInsuranceFundFeeRatios,\n        private readonly _marketTickSpacings: MarketTickSpacings,\n    ) {}\n\n    get mmRatio() {\n        return this._mmRatio\n    }\n\n    get imRatio() {\n        return this._imRatio\n    }\n\n    get maxFundingRateAbs() {\n        return this._maxFundingRateAbs\n    }\n\n    get twapInterval() {\n        return this._twapInterval\n    }\n\n    get marketExchangeFeeRatios() {\n        return this._marketExchangeFeeRatios\n    }\n\n    get marketInsuranceFundFeeRatios() {\n        return this._marketInsuranceFundFeeRatios\n    }\n\n    get marketTickSpacings() {\n        return this._marketTickSpacings\n    }\n\n    static async create(contractReader: ContractReader) {\n        const {\n            mmRatio,\n            imRatio,\n            maxFundingRate,\n            twapInterval,\n            exchangeFeeRatios,\n            insuranceFundFeeRatios,\n            tickSpacings,\n        } = await contractReader.getClearingHouseMetadata()\n\n        return new ClearingHouseConfig(\n            scaleDownDecimals(mmRatio, RATIO_DECIMAL),\n            scaleDownDecimals(imRatio, RATIO_DECIMAL),\n            scaleDownDecimals(maxFundingRate, RATIO_DECIMAL),\n            twapInterval,\n            exchangeFeeRatios,\n            insuranceFundFeeRatios,\n            tickSpacings,\n        )\n    }\n}\n"],"names":["ClearingHouseConfig","constructor","_mmRatio","_imRatio","_maxFundingRateAbs","_twapInterval","_marketExchangeFeeRatios","_marketInsuranceFundFeeRatios","_marketTickSpacings","this","mmRatio","imRatio","maxFundingRateAbs","twapInterval","marketExchangeFeeRatios","marketInsuranceFundFeeRatios","marketTickSpacings","static","contractReader","maxFundingRate","exchangeFeeRatios","insuranceFundFeeRatios","tickSpacings","getClearingHouseMetadata","scaleDownDecimals","RATIO_DECIMAL"],"mappings":"6PAWaA,EACTC,YACqBC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GANAC,KAAQP,SAARA,EACAO,KAAQN,SAARA,EACAM,KAAkBL,mBAAlBA,EACAK,KAAaJ,cAAbA,EACAI,KAAwBH,yBAAxBA,EACAG,KAA6BF,8BAA7BA,EACAE,KAAmBD,oBAAnBA,CACjB,CAEAE,cACA,OAAOD,KAAKP,QACf,CAEGS,cACA,OAAOF,KAAKN,QACf,CAEGS,wBACA,OAAOH,KAAKL,kBACf,CAEGS,mBACA,OAAOJ,KAAKJ,aACf,CAEGS,8BACA,OAAOL,KAAKH,wBACf,CAEGS,mCACA,OAAON,KAAKF,6BACf,CAEGS,yBACA,OAAOP,KAAKD,mBACf,CAEDS,oBAAoBC,GAChB,MAAMR,QACFA,EAAOC,QACPA,EAAOQ,eACPA,EAAcN,aACdA,EAAYO,kBACZA,EAAiBC,uBACjBA,EAAsBC,aACtBA,SACMJ,EAAeK,2BAEzB,OAAO,IAAIvB,EACPwB,oBAAkBd,EAASe,EAAAA,eAC3BD,EAAiBA,kBAACb,EAASc,EAAAA,eAC3BD,EAAiBA,kBAACL,EAAgBM,iBAClCZ,EACAO,EACAC,EACAC,EAEP"}