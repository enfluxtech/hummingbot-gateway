"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../../contracts/Contracts.js"),r=require("../../errors/errors.js"),t=require("../../transactionSender/index.js");require("big.js");var i=require("../../utils/errorChecker.js"),a=require("../../utils/formatters.js");require("../../utils/tick.js"),require("../../constants/envVariables.js"),require("../../constants/numbers.js");exports.LimitOrderBook=class{constructor(e){this._perp=e}async cancelLimitOrder(n){return i.invariant(this._perp.hasConnected(),(()=>new r.UnauthorizedError({functionName:"cancelLimitOrder"}))),t.getTransaction({account:this._perp.wallet.account,contract:this._perp.contracts.limitOrderBook,contractName:e.ContractName.CLEARINGHOUSE,contractFunctionName:"cancelLimitOrder",args:[{orderType:n.orderType,salt:Number(n.salt),trader:n.trader,baseToken:n.baseToken,isBaseToQuote:n.isBaseToQuote,isExactInput:n.isExactInput,amount:a.big2BigNumberAndScaleUp(n.amount,0),oppositeAmountBound:a.big2BigNumberAndScaleUp(n.oppositeAmountBound,0),deadline:a.big2BigNumberAndScaleUp(n.deadline,0),sqrtPriceLimitX96:a.big2BigNumberAndScaleUp(n.sqrtPriceLimitX96,0),referralCode:n.referralCode,reduceOnly:n.reduceOnly,roundIdWhenCreated:a.big2BigNumberAndScaleUp(n.roundIdWhenCreated,0),triggerPrice:a.big2BigNumberAndScaleUp(n.triggerPrice,0)}]})}async getPriceFeedLatestRound({tickerSymbol:e}){const r=this._perp.markets.getMarket({tickerSymbol:e});try{const{contract:e}=await r.getPriceFeedAggregator(),{roundId:t}=await e.latestRoundData();return t.toString()}catch(e){return}}};
//# sourceMappingURL=LimitOrderBook.js.map
