"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.printLog3 = void 0;
const utils_1 = require("ethers/lib/utils");
const colors_1 = require("../colors");
const constants_1 = require("../constants");
const utils_2 = require("../utils");
const log_1 = require("../format/log");
const gas_cost_1 = require("../format/gas-cost");
async function printLog3(structLog, currentAddress, dependencies) {
    const stack = (0, utils_2.shallowCopyStack)(structLog.stack);
    if (stack.length < 5) {
        console.log("Faulty LOG3");
        return;
    }
    const dataOffset = (0, utils_2.parseNumber)(stack.pop());
    const dataSize = (0, utils_2.parseNumber)(stack.pop());
    const topic0 = (0, utils_2.parseHex)(stack.pop());
    const topic1 = (0, utils_2.parseHex)(stack.pop());
    const topic2 = (0, utils_2.parseHex)(stack.pop());
    const memory = (0, utils_2.parseMemory)(structLog.memory);
    const data = (0, utils_1.hexlify)(memory.slice(dataOffset, dataOffset + dataSize));
    const str = await (0, log_1.formatLog)({
        data,
        topics: [topic0, topic1, topic2],
    }, currentAddress, dependencies);
    console.log(constants_1.DEPTH_INDENTATION.repeat((0, utils_2.isOnlyLogs)(dependencies.tracerEnv) ? 1 : structLog.depth) +
        (0, colors_1.colorLabel)("EVENT") +
        " " +
        str +
        (0, gas_cost_1.formatGasCost)(structLog, null, dependencies));
}
exports.printLog3 = printLog3;
//# sourceMappingURL=log3.js.map