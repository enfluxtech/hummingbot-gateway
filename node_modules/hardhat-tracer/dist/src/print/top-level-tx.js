"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.printTopLevelTx = void 0;
const utils_1 = require("ethers/lib/utils");
const colors_1 = require("../colors");
const utils_2 = require("../utils");
const call_1 = require("../format/call");
const contract_1 = require("../format/contract");
async function printTopLevelTx(txHash, addressStack, dependencies) {
    var _a;
    const tx = await dependencies.provider.send("eth_getTransactionByHash", [
        txHash,
    ]);
    if (tx.to !== null &&
        tx.to !== "0x" &&
        tx.to !== "0x0000000000000000000000000000000000000000") {
        // normal transaction
        console.log((0, colors_1.colorLabel)("CALL") +
            " " +
            (await (0, call_1.formatCall)(tx.to, tx.input, "0x", tx.value, tx.gas, dependencies)));
        addressStack.push(tx.to);
    }
    else {
        // contract deploy transaction
        const str = await (0, contract_1.formatContract)(tx.input, (0, utils_2.parseUint)((_a = tx.value) !== null && _a !== void 0 ? _a : "0x"), null, (0, utils_1.getContractAddress)(tx), dependencies);
        addressStack.push((0, utils_1.getContractAddress)(tx));
        console.log((0, colors_1.colorLabel)("CREATE") + " " + str);
    }
}
exports.printTopLevelTx = printTopLevelTx;
//# sourceMappingURL=top-level-tx.js.map